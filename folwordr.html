<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta charset="UTF-8" />
  <title>Ù…ØªØ§Ø¨Ø¹Ø© Ø­Ø§Ù„Ø© Ø§Ù„Ø·Ù„Ø¨</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
<header>
  <div class="logo">
    <a href="index.html"><img  src="station2-01.svg" alt=" Ø§Ù„Ù…Ø­Ø·Ø© Ø§Ù„Ø§ÙˆØªÙˆÙ…Ø§ØªÙŠÙƒÙŠØ©" /></a>
  </div>
  <div class="menu-toggle" id="menuToggle">â˜°</div>
  <nav>
    <ul id="navList">
      <li><a href="index.html">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a></li>
      <li><a href="service.html">Ø§Ù„Ø®Ø¯Ù…Ø§Øª</a></li>
      <li><a href="order.html">Ø§Ø­Ø¬Ø² Ø§Ù„Ø¢Ù†</a></li>
      <li><a href="folwordr.html">Ù…ØªØ§Ø¨Ø¹Ø© Ø­Ø§Ù„Ø© Ø§Ù„Ø·Ù„Ø¨</a></li>
      <li><a href="#">Ø§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª</a></li>
      <li><a href="https://wa.me/9647832460670?text=Ù…Ø±Ø­Ø¨Ø§ØŒ%20Ø£Ø±ØºØ¨%20Ø¨Ù…Ø¹Ø±ÙØ©%20ØªÙØ§ØµÙŠÙ„%20Ø§Ù„Ø®Ø¯Ù…Ø§Øª" target="_blank" class="action-button whatsapp">ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§</a></li>
    </ul>
  </nav>
</header>


<div class="tracking-container">
  <h2>ğŸ” Ù…ØªØ§Ø¨Ø¹Ø© Ø­Ø§Ù„Ø© Ø§Ù„Ø·Ù„Ø¨</h2>
  <input type="tel" id="phoneNumberInput" placeholder="Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ" />
  <button onclick="trackOrder()">Ù…ØªØ§Ø¨Ø¹Ø©</button>

  <div id="trackingStatus" class="tracking-status hidden">
    <ul class="progressbar" id="progressSteps">
      <li class="step done">ØªÙ… Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…</li>
      <li class="step">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØºØ³Ù„</li>
      <li class="step">Ø§Ù„ØªØ¬ÙÙŠÙ</li>
      <li class="step">Ø§Ù„ØªØ¬Ù‡ÙŠØ²</li>
      <li class="step">Ø§Ù„ØªÙˆØµÙŠÙ„</li>
    </ul>
  </div>

  <div id="deliveryFeedback" class="hidden" style="margin-top:20px;">
    <p>âœ… Ù„Ù‚Ø¯ ØªÙ… ØªÙˆØµÙŠÙ„ Ø·Ù„Ø¨Ùƒ Ø¨Ù†Ø¬Ø§Ø­ØŒ Ø§Ù„Ø±Ø¬Ø§Ø¡ ØªÙ‚ÙŠÙŠÙ… ØªØ¬Ø±Ø¨ØªÙƒ Ù…Ø¹Ù†Ø§ (Ù†ØªÙ…Ù†Ù‰ Ø£Ù† ØªÙƒÙˆÙ† Ø±Ø§Ø¶Ù Ø¹Ù†Ø§):</p>

    <label>Ø§Ù„ØªÙ‚ÙŠÙŠÙ… (Ø§Ø®ØªØ± Ù…Ù† 1 Ø¥Ù„Ù‰ 5):</label><br />
    <div id="ratingButtons">
      <button type="button" onclick="setRating(1)">1</button>
      <button type="button" onclick="setRating(2)">2</button>
      <button type="button" onclick="setRating(3)">3</button>
      <button type="button" onclick="setRating(4)">4</button>
      <button type="button" onclick="setRating(5)">5</button>
    </div>

    <input type="hidden" id="rating" name="rating" />

    <label for="issue">Ø¥Ø°Ø§ Ù„Ø¯ÙŠÙƒ Ù…Ø´ÙƒÙ„Ø© ÙÙŠ Ø·Ù„Ø¨ÙƒØŒ ÙŠØ±Ø¬Ù‰ ÙƒØªØ§Ø¨ØªÙ‡Ø§ Ù‡Ù†Ø§:</label><br />
    <textarea
      id="issue"
      name="issue"
      rows="4"
      cols="40"
      placeholder="Ø§ÙƒØªØ¨ Ù…Ø´ÙƒÙ„ØªÙƒ Ù‡Ù†Ø§ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)"
    ></textarea>
    <br /><br />

    <button onclick="sendFeedback()">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªÙ‚ÙŠÙŠÙ… ÙˆØ§Ù„Ù…Ø´ÙƒÙ„Ø©</button>
  </div>
</div>

<script>
  let selectedRating = 0;

function trackOrder() {
  const phone = document.getElementById("phoneNumberInput").value.trim();
  if (!phone) {
    alert("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ Ù„Ù„Ù…ØªØ§Ø¨Ø¹Ø©.");
    return;
  }

  globalPhone = phone; // Ù†Ø­ÙØ¸Ù‡ Ù‡Ù†Ø§

  fetch(`https://script.google.com/macros/s/AKfycbzIppstvyhiHMw6_C0APM7SS6BLQ4_DbEdc2Zj6PehXsYkZ6japKXPLJRtlxXdbBvN5dQ/exec?phone=${encodeURIComponent(phone)}`)
    .then(res => res.json())
    .then(data => {
      if (!data.status) {
        alert("ğŸš« Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø·Ù„Ø¨ Ù…Ø±ØªØ¨Ø· Ø¨Ù‡Ø°Ø§ Ø§Ù„Ø±Ù‚Ù….");
        return;
      }

      document.getElementById("trackingStatus").classList.remove("hidden");

      const statusSteps = document.querySelectorAll(".step");
      statusSteps.forEach(step => step.classList.remove("done"));

      const statusMap = {
        "ØªÙ… Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…": 1,
        "Ø¬Ø§Ø±ÙŠ Ø§Ù„ØºØ³Ù„": 2,
        "Ø§Ù„ØªØ¬ÙÙŠÙ": 3,
        "Ø§Ù„ØªØ¬Ù‡ÙŠØ²": 4,
        "Ø§Ù„ØªÙˆØµÙŠÙ„": 5,
      };

      const currentStep = statusMap[data.status] || 0;
      for (let i = 0; i < currentStep; i++) {
        statusSteps[i].classList.add("done");
      }

      const feedbackDiv = document.getElementById("deliveryFeedback");
      if (data.status === "Ø§Ù„ØªÙˆØµÙŠÙ„") {
        feedbackDiv.classList.remove("hidden");
      } else {
        feedbackDiv.classList.add("hidden");
        resetRating();
      }
    })
    .catch(error => {
      console.error("âŒ Ø®Ø·Ø£:", error);
      alert("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ­Ù…ÙŠÙ„ Ø­Ø§Ù„Ø© Ø§Ù„Ø·Ù„Ø¨.");
    });
}


  function setRating(value) {
    selectedRating = value;
    document.getElementById("rating").value = value;

    const buttons = document.querySelectorAll("#ratingButtons button");
    buttons.forEach((btn, index) => {
      if (index === value - 1) {
        btn.classList.add("selected");
      } else {
        btn.classList.remove("selected");
      }
    });
  }

  function resetRating() {
    selectedRating = 0;
    document.getElementById("rating").value = "";
    const buttons = document.querySelectorAll("#ratingButtons button");
    buttons.forEach(btn => btn.classList.remove("selected"));
    document.getElementById("issue").value = "";
  }

function sendFeedback() {
  const phone = document.getElementById("phoneNumberInput").value.trim();
  const rating = selectedRating;
  const issue = document.getElementById("issue").value.trim();

  if (!phone) {
    alert("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ Ø£ÙˆÙ„Ø§Ù‹.");
    return;
  }
  if (!rating || rating < 1 || rating > 5) {
    alert("ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± ØªÙ‚ÙŠÙŠÙ… Ù…Ù† 1 Ø¥Ù„Ù‰ 5.");
    return;
  }

  const data = {
    phone,
    rating,
    issue
  };

  fetch("https://script.google.com/macros/s/AKfycbwLgHs_5wpVTtqBPP_0ADy7p_gx45hAwNcLQjm_Z62wWwx4zhakbYTWaEGAfqdp5t_u2Q/exec", {
  method: "POST",
  mode: "no-cors", // â† ØªØ³Ù…Ø­ Ø¨ØªØ¬Ø§ÙˆØ² CORS Ù„ÙƒÙ† Ø¨Ø¯ÙˆÙ† Ø±Ø¯
  headers: {
    "Content-Type": "application/json",
  },
  body: JSON.stringify(data),
})
.then(() => {
  alert("âœ… ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªÙ‚ÙŠÙŠÙ… .");
  resetRating();
})
.catch(err => {
  console.error("âŒ Ø®Ø·Ø£ ÙÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…:", err);
  alert("âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù„Ø§Ø­Ù‚Ø§Ù‹.");
});

  
}

</script>

<script>
  document.addEventListener("DOMContentLoaded", function() {
    const toggleBtn = document.getElementById('menuToggle');
    const navList = document.getElementById('navList');

    toggleBtn.addEventListener('click', () => {
      navList.classList.toggle('show');
    });
  });
</script>
<script>
  // Ù…Ù†Ø¹ Ø§Ù„ÙƒÙ„Ùƒ Ø§Ù„ÙŠÙ…ÙŠÙ†
  document.addEventListener('contextmenu', function(e) {
    e.preventDefault();
  });

  // Ù…Ù†Ø¹ Ø§Ø®ØªØµØ§Ø±Ø§Øª ÙØ­Øµ Ø§Ù„ÙƒÙˆØ¯ (F12 Ùˆ Ctrl+Shift+I Ùˆ Ctrl+U)
  document.addEventListener('keydown', function(e) {
    if (
      e.key === "F12" ||
      (e.ctrlKey && e.shiftKey && e.key === 'I') ||
      (e.ctrlKey && e.shiftKey && e.key === 'J') ||
      (e.ctrlKey && e.key === 'U')
    ) {
      e.preventDefault();
    }
  });
</script>


</body>
</html>


